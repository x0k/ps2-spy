package honu

import (
	"encoding/json"
	"testing"
)

func TestUnmarshalWorldOverview(t *testing.T) {
	data := []byte(`[{"worldID":1,"worldName":"Connery","playersOnline":54,"zones":[{"zoneID":2,"worldID":1,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T14:37:22Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":90,"nc":0,"tr":0,"total":90}},{"zoneID":4,"worldID":1,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T00:41:13Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":88,"tr":0,"total":88}},{"zoneID":6,"worldID":1,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T08:50:18Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":82,"nc":0,"tr":0,"total":82}},{"zoneID":8,"worldID":1,"isOpened":true,"unstableState":1,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-24T17:28:56Z","playerCount":46,"players":{"all":46,"vs":11,"nc":20,"tr":15,"unknown":0},"territoryControl":{"vs":3,"nc":10,"tr":7,"total":49}},{"zoneID":344,"worldID":1,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T01:36:44Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":71,"tr":0,"total":71}}]},{"worldID":10,"worldName":"Miller","playersOnline":484,"zones":[{"zoneID":2,"worldID":10,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T09:45:38Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":90,"nc":0,"tr":0,"total":90}},{"zoneID":4,"worldID":10,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T03:57:40Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":88,"tr":0,"total":88}},{"zoneID":6,"worldID":10,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T16:20:39Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":82,"nc":0,"tr":0,"total":82}},{"zoneID":8,"worldID":10,"isOpened":true,"unstableState":3,"alert":{"id":39357,"timestamp":"2023-12-25T16:51:17Z","duration":5400,"zoneID":8,"worldID":10,"alertID":152,"instanceID":36861,"name":"","victorFactionID":null,"warpgateVS":258000,"warpgateNC":259000,"warpgateTR":260000,"zoneFacilityCount":49,"countVS":null,"countNC":null,"countTR":null,"participants":0},"alertInfo":{"id":152,"name":"Esamir Liberation","description":"Control territory to lock Esamir","typeID":9,"durationMinutes":90},"alertStart":"2023-12-25T16:51:17Z","alertEnd":"2023-12-25T18:21:17Z","lastLocked":"2023-12-24T19:40:16Z","playerCount":446,"players":{"all":446,"vs":148,"nc":146,"tr":150,"unknown":2},"territoryControl":{"vs":20,"nc":18,"tr":11,"total":49}},{"zoneID":344,"worldID":10,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-24T22:10:36Z","playerCount":1,"players":{"all":1,"vs":0,"nc":1,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":71,"total":71}}]},{"worldID":13,"worldName":"Cobalt","playersOnline":393,"zones":[{"zoneID":2,"worldID":13,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-24T20:59:00Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":90,"total":90}},{"zoneID":4,"worldID":13,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T02:46:04Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":88,"total":88}},{"zoneID":6,"worldID":13,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T15:05:12Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":82,"nc":0,"tr":0,"total":82}},{"zoneID":8,"worldID":13,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T08:33:08Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":49,"nc":0,"tr":0,"total":49}},{"zoneID":344,"worldID":13,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-24T18:21:57Z","playerCount":367,"players":{"all":367,"vs":124,"nc":123,"tr":119,"unknown":1},"territoryControl":{"vs":26,"nc":28,"tr":17,"total":71}}]},{"worldID":17,"worldName":"Emerald","playersOnline":259,"zones":[{"zoneID":2,"worldID":17,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T04:38:16Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":90,"tr":0,"total":90}},{"zoneID":4,"worldID":17,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T11:39:44Z","playerCount":1,"players":{"all":1,"vs":1,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":88,"total":88}},{"zoneID":6,"worldID":17,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T06:57:42Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":82,"nc":0,"tr":0,"total":82}},{"zoneID":8,"worldID":17,"isOpened":true,"unstableState":2,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T02:25:42Z","playerCount":224,"players":{"all":224,"vs":73,"nc":74,"tr":77,"unknown":0},"territoryControl":{"vs":13,"nc":7,"tr":17,"total":49}},{"zoneID":344,"worldID":17,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T12:35:16Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":71,"nc":0,"tr":0,"total":71}}]},{"worldID":24,"worldName":"Apex","playersOnline":0,"zones":[{"zoneID":2,"worldID":24,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":89,"nc":0,"tr":0,"total":89}},{"zoneID":4,"worldID":24,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":29,"nc":29,"tr":30,"total":88}},{"zoneID":6,"worldID":24,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":81,"nc":0,"tr":0,"total":81}},{"zoneID":8,"worldID":24,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":49,"tr":0,"total":49}},{"zoneID":344,"worldID":24,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":69,"tr":0,"total":69}}]},{"worldID":19,"worldName":"Jaeger","playersOnline":0,"zones":[{"zoneID":2,"worldID":19,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-13T20:50:50Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":44,"nc":19,"tr":26,"total":89}},{"zoneID":4,"worldID":19,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-13T20:50:51Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":33,"nc":29,"tr":26,"total":88}},{"zoneID":6,"worldID":19,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-13T20:50:50Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":25,"nc":35,"tr":21,"total":81}},{"zoneID":8,"worldID":19,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-13T20:50:48Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":15,"nc":19,"tr":15,"total":49}},{"zoneID":344,"worldID":19,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-13T23:17:01Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":19,"nc":25,"tr":25,"total":69}}]},{"worldID":40,"worldName":"SolTech","playersOnline":140,"zones":[{"zoneID":2,"worldID":40,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T01:42:33Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":90,"total":90}},{"zoneID":4,"worldID":40,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T15:15:35Z","playerCount":1,"players":{"all":1,"vs":0,"nc":0,"tr":1,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":88,"total":88}},{"zoneID":6,"worldID":40,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T13:04:37Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":82,"tr":0,"total":82}},{"zoneID":8,"worldID":40,"isOpened":false,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T08:53:35Z","playerCount":8,"players":{"all":8,"vs":6,"nc":0,"tr":2,"unknown":0},"territoryControl":{"vs":49,"nc":0,"tr":0,"total":49}},{"zoneID":344,"worldID":40,"isOpened":true,"unstableState":2,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-24T17:32:03Z","playerCount":120,"players":{"all":120,"vs":16,"nc":60,"tr":44,"unknown":0},"territoryControl":{"vs":8,"nc":20,"tr":15,"total":71}}]},{"worldID":1000,"worldName":"Genudine","playersOnline":146,"zones":[{"zoneID":2,"worldID":1000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T14:53:25Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":90,"total":90}},{"zoneID":4,"worldID":1000,"isOpened":true,"unstableState":2,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T00:00:22Z","playerCount":113,"players":{"all":113,"vs":39,"nc":33,"tr":28,"unknown":13},"territoryControl":{"vs":22,"nc":15,"tr":18,"total":88}},{"zoneID":6,"worldID":1000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T08:50:24Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":82,"tr":0,"total":82}},{"zoneID":8,"worldID":1000,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":0,"total":0}},{"zoneID":344,"worldID":1000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T03:03:19Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":54,"nc":0,"tr":0,"total":54}}]},{"worldID":2000,"worldName":"Ceres","playersOnline":85,"zones":[{"zoneID":2,"worldID":2000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T06:58:01Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":90,"total":90}},{"zoneID":4,"worldID":2000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T13:09:02Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":88,"total":88}},{"zoneID":6,"worldID":2000,"isOpened":true,"unstableState":1,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T01:10:56Z","playerCount":76,"players":{"all":76,"vs":17,"nc":31,"tr":23,"unknown":5},"territoryControl":{"vs":6,"nc":5,"tr":6,"total":82}},{"zoneID":8,"worldID":2000,"isOpened":true,"unstableState":3,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":null,"playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":0,"tr":0,"total":0}},{"zoneID":344,"worldID":2000,"isOpened":true,"unstableState":0,"alert":null,"alertInfo":null,"alertStart":null,"alertEnd":null,"lastLocked":"2023-12-25T15:36:02Z","playerCount":0,"players":{"all":0,"vs":0,"nc":0,"tr":0,"unknown":0},"territoryControl":{"vs":0,"nc":54,"tr":0,"total":54}}]}]`)
	var content []World
	err := json.Unmarshal(data, &content)
	if err != nil {
		t.Error(err)
	}
	if len(content) != 9 {
		t.Error("expected 9 worlds")
	}
	if content[0].WorldId != 1 {
		t.Error("expected world 1")
	}
	if len(content[0].Zones) != 5 {
		t.Error("expected 0 zones")
	}
}
