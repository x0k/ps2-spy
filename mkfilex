#!/bin/bash -e

all:
    DISCORD_TOKEN=$(cat ~/Sync/ps2-spy/test-token) \
      CENSUS_SERVICE_ID=$(cat ~/Sync/ps2-spy/test-service) \
      go run cmd/ps2-spy/*.go --config config/local.yml

build:
    CGO_ENABLED=1 go build -o bin/app cmd/ps2-spy/*.go

run:
    DISCORD_TOKEN=$(cat ~/Sync/ps2-spy/test-token) \
      CENSUS_SERVICE_ID=$(cat ~/Sync/ps2-spy/test-service) \
      .bin/app --config config/local.yml

test:
    go test ./...

o:
    go run tools/explorer/*.go --resource outfit --query $1 --output tmp

os:
    go run tools/explorer/*.go --resource outfits --query $1 --output tmp

c:
    go run tools/explorer/*.go --resource character --query $1 --output tmp

cs:
    go run tools/explorer/*.go --resource characters --query $1 --output tmp

ms:
    go run tools/explorer/*.go --resource members --query $1 --output tmp
